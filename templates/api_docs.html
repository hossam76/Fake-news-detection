<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation | Fake News Detection System</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <i class="fas fa-shield-alt me-2"></i>FakeNewsGuard
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/"><i class="fas fa-home me-1"></i>Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard"><i class="fas fa-chart-line me-1"></i>Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/learn"><i class="fas fa-graduation-cap me-1"></i>Learn</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/case_studies"><i class="fas fa-microscope me-1"></i>Case Studies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/api_docs"><i class="fas fa-code me-1"></i>API</a>
                    </li>
                </ul>
                <div class="d-flex">
                    <span class="navbar-text me-3">
                        <span class="badge bg-light text-dark">Final Year Project</span>
                    </span>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="hero-section text-center mb-4">
            <h1 class="display-4"><i class="fas fa-code me-2"></i>API Documentation</h1>
            <p class="lead">Integrate fake news detection into your applications using our REST API</p>
        </div>
        
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-dark text-white">
                <h4 class="mb-0"><i class="fas fa-info-circle me-2"></i>Introduction</h4>
            </div>
            <div class="card-body">
                <p>Our Fake News Detection API allows developers to easily integrate our machine learning capabilities into their applications. The API provides endpoints for predicting whether a news article is fake or real, retrieving statistics, and processing URLs.</p>
                
                <h5 class="mt-4">Base URL</h5>
                <div class="endpoint-url">https://your-domain.com/api</div>
                
                <h5 class="mt-4">Authentication</h5>
                <p>Currently, the API is available for demonstration purposes without authentication. In a production environment, authentication would be implemented using API keys or OAuth tokens.</p>
                
                <div class="alert alert-warning mt-4">
                    <i class="fas fa-exclamation-triangle me-2"></i> <strong>Note:</strong> This API documentation is provided as an educational component of this final year project. The endpoints are functional for demonstration and testing purposes.
                </div>
            </div>
        </div>
        
        <div class="api-section">
            <h3>Prediction Endpoints</h3>
            
            <div class="endpoint">
                <span class="method post">POST</span> <span class="endpoint-name">/predict</span>
                <p>Analyzes text and predicts whether it's real or fake news.</p>
                
                <h6>Request Body</h6>
                <div class="endpoint-url">
                    {<br>
                    &nbsp;&nbsp;<span class="key">"text"</span>: <span class="string">"The news article content to analyze..."</span>,<br>
                    &nbsp;&nbsp;<span class="key">"model"</span>: <span class="string">"naive_bayes"</span> <span class="text-muted">// Optional: "naive_bayes", "random_forest", "lstm", "all"</span><br>
                    }
                </div>
                
                <h6>Response</h6>
                <div class="response-example">
                    {<br>
                    &nbsp;&nbsp;<span class="key">"prediction"</span>: <span class="string">"fake"</span>,<br>
                    &nbsp;&nbsp;<span class="key">"confidence"</span>: <span class="number">0.89</span>,<br>
                    &nbsp;&nbsp;<span class="key">"model_used"</span>: <span class="string">"naive_bayes"</span><br>
                    }
                </div>
                
                <table class="param-table mt-3">
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>text</td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>The news article content to analyze</td>
                    </tr>
                    <tr>
                        <td>model</td>
                        <td>string</td>
                        <td>No</td>
                        <td>ML model to use (defaults to "naive_bayes")</td>
                    </tr>
                </table>
            </div>
            
            <div class="endpoint">
                <span class="method post">POST</span> <span class="endpoint-name">/predict_ensemble</span>
                <p>Analyzes text using an ensemble of models for higher accuracy.</p>
                
                <h6>Request Body</h6>
                <div class="endpoint-url">
                    {<br>
                    &nbsp;&nbsp;<span class="key">"text"</span>: <span class="string">"The news article content to analyze..."</span><br>
                    }
                </div>
                
                <h6>Response</h6>
                <div class="response-example">
                    {<br>
                    &nbsp;&nbsp;<span class="key">"prediction"</span>: <span class="string">"real"</span>,<br>
                    &nbsp;&nbsp;<span class="key">"confidence"</span>: <span class="number">0.92</span><br>
                    }
                </div>
            </div>
            
            <div class="endpoint">
                <span class="method post">POST</span> <span class="endpoint-name">/analyze_url</span>
                <p>Extracts and analyzes content from a news article URL.</p>
                
                <h6>Request Body</h6>
                <div class="endpoint-url">
                    {<br>
                    &nbsp;&nbsp;<span class="key">"url"</span>: <span class="string">"https://example.com/news-article"</span><br>
                    }
                </div>
                
                <h6>Response</h6>
                <div class="response-example">
                    {<br>
                    &nbsp;&nbsp;<span class="key">"success"</span>: <span class="boolean">true</span>,<br>
                    &nbsp;&nbsp;<span class="key">"title"</span>: <span class="string">"Article Title"</span>,<br>
                    &nbsp;&nbsp;<span class="key">"text"</span>: <span class="string">"Extracted article content..."</span>,<br>
                    &nbsp;&nbsp;<span class="key">"authors"</span>: [<span class="string">"John Doe"</span>],<br>
                    &nbsp;&nbsp;<span class="key">"publish_date"</span>: <span class="string">"2023-01-15T14:30:00"</span>,<br>
                    &nbsp;&nbsp;<span class="key">"keywords"</span>: [<span class="string">"politics"</span>, <span class="string">"election"</span>]<br>
                    }
                </div>
            </div>
        </div>
        
        <div class="api-section">
            <h3>Statistics Endpoints</h3>
            
            <div class="endpoint">
                <span class="method get">GET</span> <span class="endpoint-name">/api/stats</span>
                <p>Retrieves analysis statistics and model performance data.</p>
                
                <h6>Response</h6>
                <div class="response-example">
                    {<br>
                    &nbsp;&nbsp;<span class="key">"total_analyses"</span>: <span class="number">400</span>,<br>
                    &nbsp;&nbsp;<span class="key">"fake_count"</span>: <span class="number">157</span>,<br>
                    &nbsp;&nbsp;<span class="key">"real_count"</span>: <span class="number">243</span>,<br>
                    &nbsp;&nbsp;<span class="key">"fake_percent"</span>: <span class="number">39.25</span>,<br>
                    &nbsp;&nbsp;<span class="key">"real_percent"</span>: <span class="number">60.75</span>,<br>
                    &nbsp;&nbsp;<span class="key">"model_performance"</span>: { <span class="text-muted">// Performance metrics for each model</span> },<br>
                    &nbsp;&nbsp;<span class="key">"time_series"</span>: { <span class="text-muted">// Time series data for trends</span> }<br>
                    }
                </div>
            </div>
            
            <div class="endpoint">
                <span class="method get">GET</span> <span class="endpoint-name">/show_data</span>
                <p>Retrieves information about the training dataset.</p>
                
                <h6>Response</h6>
                <div class="response-example">
                    {<br>
                    &nbsp;&nbsp;<span class="key">"filename"</span>: <span class="string">"preprocessed_data.csv"</span>,<br>
                    &nbsp;&nbsp;<span class="key">"num_rows"</span>: <span class="number">20800</span>,<br>
                    &nbsp;&nbsp;<span class="key">"columns"</span>: [<span class="string">"text"</span>, <span class="string">"label"</span>, ...],<br>
                    &nbsp;&nbsp;<span class="key">"sample"</span>: [ <span class="text-muted">// Sample of first 5 rows</span> ],<br>
                    &nbsp;&nbsp;<span class="key">"summary"</span>: { <span class="text-muted">// Statistical summary of numeric columns</span> }<br>
                    }
                </div>
            </div>
        </div>
        
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="fas fa-laptop-code me-2"></i>Code Examples</h4>
            </div>
            <div class="card-body">
                <h5>Python Example</h5>
                <div class="response-example">
                    <span class="text-muted"># Using the predict endpoint with Python and requests</span><br>
                    import requests<br>
                    import json<br><br>
                    
                    <span class="text-muted"># Define the endpoint and payload</span><br>
                    url = "http://your-domain.com/predict"<br>
                    payload = {<br>
                    &nbsp;&nbsp;"text": "The article content to analyze...",<br>
                    &nbsp;&nbsp;"model": "ensemble"<br>
                    }<br><br>
                    
                    <span class="text-muted"># Make the request</span><br>
                    response = requests.post(url, json=payload)<br>
                    result = response.json()<br><br>
                    
                    <span class="text-muted"># Process the result</span><br>
                    if result["prediction"] == "fake":<br>
                    &nbsp;&nbsp;print(f"This article is likely FAKE news with {result['confidence']*100:.1f}% confidence")<br>
                    else:<br>
                    &nbsp;&nbsp;print(f"This article is likely REAL news with {result['confidence']*100:.1f}% confidence")<br>
                </div>
                
                <h5 class="mt-4">JavaScript Example</h5>
                <div class="response-example">
                    <span class="text-muted">// Using the predict endpoint with JavaScript and fetch</span><br>
                    const analyzeText = async (text) => {<br>
                    &nbsp;&nbsp;const url = "http://your-domain.com/predict";<br>
                    &nbsp;&nbsp;const payload = {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;text: text,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;model: "ensemble"<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;try {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method: "POST",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers: {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Content-Type": "application/json"<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body: JSON.stringify(payload)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;const result = await response.json();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;console.log(`Prediction: ${result.prediction}, Confidence: ${result.confidence*100}%`);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;return result;<br>
                    &nbsp;&nbsp;} catch (error) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;console.error("Error analyzing text:", error);<br>
                    &nbsp;&nbsp;}<br>
                    };<br>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="footer mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Fake News Detection System</h5>
                    <p>Final Year Project</p>
                </div>
                <div class="col-md-3">
                    <h5>Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="/">Home</a></li>
                        <li><a href="/dashboard">Dashboard</a></li>
                        <li><a href="/learn">Learning Center</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5>References</h5>
                    <ul class="list-unstyled">
                        <li><a href="/case_studies">Case Studies</a></li>
                        <li><a href="#">Project Repository</a></li>
                        <li><a href="#">Research Paper</a></li>
                    </ul>
                </div>
            </div>
            <hr>
            <div class="text-center">
                <p>&copy; 2023 Fake News Detection System</p>
            </div>
        </div>
    </footer>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
